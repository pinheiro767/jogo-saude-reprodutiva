<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>Jogo do Mario - Tabuleiro</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #F0E68C 100%);
            min-height: 100%;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        html {
            height: 100%;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            align-items: start;
        }

        .game-board {
            background: transparent; 
            border-radius: 20px;
            box-shadow: none;
            padding: 30px;
        }
        
        .control-panel {
            background: transparent; 
            border-radius: 20px;
            box-shadow: none;
            padding: 25px;
            height: fit-content;
        }

        .stats, .messages, #introducao {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="white" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>') repeat;
            animation: starfield 20s linear infinite;
        }
        
        @keyframes starfield {
            0% { transform: translateY(0); }
            100% { transform: translateY(-20px); }
        }
        
        .header h1 {
            color: #fff; 
            text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.6), 0 4px 8px rgba(0,0,0,0.3);
            font-size: 3rem;
            margin: 0;
            font-weight: 800;
            position: relative;
            z-index: 2;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(255,215,0,0.8), 0 0 40px rgba(255,215,0,0.6), 0 4px 8px rgba(0,0,0,0.3); }
            100% { text-shadow: 0 0 30px rgba(255,215,0,1), 0 0 60px rgba(255,215,0,0.8), 0 4px 8px rgba(0,0,0,0.3); }
        }
        
        .header p {
            color: #f8f9fa;
            font-size: 1.2rem;
            margin: 15px 0 0 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
            font-weight: 500;
        }
        
        .floating-coins {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .coin {
            position: absolute;
            font-size: 24px;
            animation: float 6s ease-in-out infinite;
            opacity: 0.8;
        }
        
        .coin:nth-child(1) { left: 10%; animation-delay: 0s; }
        .coin:nth-child(2) { left: 20%; animation-delay: 1s; }
        .coin:nth-child(3) { left: 30%; animation-delay: 2s; }
        .coin:nth-child(4) { left: 40%; animation-delay: 0.5s; }
        .coin:nth-child(5) { left: 50%; animation-delay: 1.5s; }
        .coin:nth-child(6) { left: 60%; animation-delay: 2.5s; }
        .coin:nth-child(7) { left: 70%; animation-delay: 3s; }
        .coin:nth-child(8) { left: 80%; animation-delay: 3.5s; }
        .coin:nth-child(9) { left: 90%; animation-delay: 4s; }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            overflow: hidden;
        }
        
        .floating-item {
            position: absolute;
            font-size: 28px;
            animation: floatAround 12s ease-in-out infinite;
            opacity: 0.7;
        }
        
        .floating-item:nth-child(1) { left: 5%; animation-delay: 0s; animation-duration: 10s; }
        .floating-item:nth-child(2) { left: 15%; animation-delay: 2s; animation-duration: 14s; }
        .floating-item:nth-child(3) { left: 25%; animation-delay: 4s; animation-duration: 11s; }
        .floating-item:nth-child(4) { left: 35%; animation-delay: 1s; animation-duration: 13s; }
        .floating-item:nth-child(5) { left: 45%; animation-delay: 3s; animation-duration: 12s; }
        .floating-item:nth-child(6) { left: 55%; animation-delay: 5s; animation-duration: 15s; }
        .floating-item:nth-child(7) { left: 65%; animation-delay: 2.5s; animation-duration: 9s; }
        .floating-item:nth-child(8) { left: 75%; animation-delay: 4.5s; animation-duration: 16s; }
        .floating-item:nth-child(9) { left: 85%; animation-delay: 1.5s; animation-duration: 11s; }
        .floating-item:nth-child(10) { left: 95%; animation-delay: 3.5s; animation-duration: 13s; }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(100px) rotate(0deg); 
                opacity: 0; 
            }
            10%, 90% { 
                opacity: 0.8; 
            }
            50% { 
                transform: translateY(-20px) rotate(180deg); 
                opacity: 1; 
            }
        }
        
        @keyframes floatAround {
            0% { 
                transform: translateY(100vh) translateX(0px) rotate(0deg) scale(1); 
                opacity: 0; 
            }
            10% { 
                opacity: 0.7; 
            }
            25% { 
                transform: translateY(75vh) translateX(20px) rotate(90deg) scale(1.1); 
            }
            50% { 
                transform: translateY(50vh) translateX(-15px) rotate(180deg) scale(0.9); 
                opacity: 1; 
            }
            75% { 
                transform: translateY(25vh) translateX(25px) rotate(270deg) scale(1.2); 
            }
            90% { 
                opacity: 0.7; 
            }
            100% { 
                transform: translateY(-10vh) translateX(0px) rotate(360deg) scale(1); 
                opacity: 0; 
            }
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }
        
        .casa {
            aspect-ratio: 1;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
            padding: 8px;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(0);
            z-index: 10;
            background-color: white;
        }
        
        .casa:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        
        .casa-normal { background: #f8f9fa; color: #495057; }
        .casa-pergunta { background: linear-gradient(135deg, #ffd93d, #ff6b35); color: white; border-color: #ff6b35; }
        .casa-especial { background: linear-gradient(135deg, #28a745, #20c997); color: white; border-color: #28a745; }
        .casa-bowser { background: linear-gradient(135deg, #495057, #212529); color: #ff6b6b; border-color: #212529; font-weight: bold; }
        .casa-inicio { background: linear-gradient(135deg, #007bff, #0056b3); color: white; border-color: #007bff; }
        .casa-fim { background: linear-gradient(135deg, #dc3545, #c82333); color: white; border-color: #dc3545; }
        
        .peca {
            position: absolute;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            font-weight: bold;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 20;
            animation: bounce 0.5s ease;
        }

        .peca-1 { 
            background: #e74c3c;
            top: -10px; 
            right: -10px;
        }
        
        .peca-2 { 
            background: #e91e63;
            top: -10px; 
            left: -10px;
        }



        .peca.active {
            border: 4px solid #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .rolling {
            animation: spin 0.5s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dice-container {
            text-align: center;
            margin: 20px 0;
            perspective: 1200px;
            position: relative;
        }
        
        .dice-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255,215,0,0.3) 0%, rgba(255,215,0,0.1) 50%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: diceGlow 2s ease-in-out infinite alternate;
            pointer-events: none;
        }
        
        @keyframes diceGlow {
            0% { 
                box-shadow: 0 0 20px rgba(255,215,0,0.4);
                transform: translate(-50%, -50%) scale(1);
            }
            100% { 
                box-shadow: 0 0 40px rgba(255,215,0,0.8);
                transform: translate(-50%, -50%) scale(1.1);
            }
        }

        .dice {
            width: 100px;
            height: 100px;
            position: relative;
            display: inline-block;
            margin: 0 20px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: all 0.4s ease;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .dice:hover {
            transform: scale(1.15) rotateX(15deg) rotateY(15deg);
            filter: drop-shadow(0 15px 30px rgba(0,0,0,0.4));
        }

        .dice-face {
            position: absolute;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 25%, #feca57 50%, #48dbfb 75%, #0abde3 100%);
            border: 4px solid #fff;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0;
            box-shadow: 
                inset 0 0 20px rgba(255,255,255,0.3),
                0 8px 25px rgba(0,0,0,0.3),
                0 0 0 2px rgba(255,215,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        .dice-face::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            animation: shimmer 3s linear infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .dice-dot {
            width: 14px;
            height: 14px;
            background: radial-gradient(circle, #fff 0%, #f8f9fa 100%);
            border-radius: 50%;
            position: absolute;
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.3),
                inset 0 1px 2px rgba(255,255,255,0.8);
            z-index: 2;
        }

        /* Face 1 */
        .face-1 .dice-dot:nth-child(1) { top: 50%; left: 50%; transform: translate(-50%, -50%); }

        /* Face 2 */
        .face-2 .dice-dot:nth-child(1) { top: 20%; left: 20%; }
        .face-2 .dice-dot:nth-child(2) { bottom: 20%; right: 20%; }

        /* Face 3 */
        .face-3 .dice-dot:nth-child(1) { top: 20%; left: 20%; }
        .face-3 .dice-dot:nth-child(2) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .face-3 .dice-dot:nth-child(3) { bottom: 20%; right: 20%; }

        /* Face 4 */
        .face-4 .dice-dot:nth-child(1) { top: 20%; left: 20%; }
        .face-4 .dice-dot:nth-child(2) { top: 20%; right: 20%; }
        .face-4 .dice-dot:nth-child(3) { bottom: 20%; left: 20%; }
        .face-4 .dice-dot:nth-child(4) { bottom: 20%; right: 20%; }

        /* Face 5 */
        .face-5 .dice-dot:nth-child(1) { top: 20%; left: 20%; }
        .face-5 .dice-dot:nth-child(2) { top: 20%; right: 20%; }
        .face-5 .dice-dot:nth-child(3) { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .face-5 .dice-dot:nth-child(4) { bottom: 20%; left: 20%; }
        .face-5 .dice-dot:nth-child(5) { bottom: 20%; right: 20%; }

        /* Face 6 */
        .face-6 .dice-dot:nth-child(1) { top: 20%; left: 20%; }
        .face-6 .dice-dot:nth-child(2) { top: 20%; right: 20%; }
        .face-6 .dice-dot:nth-child(3) { top: 50%; left: 20%; }
        .face-6 .dice-dot:nth-child(4) { top: 50%; right: 20%; }
        .face-6 .dice-dot:nth-child(5) { bottom: 20%; left: 20%; }
        .face-6 .dice-dot:nth-child(6) { bottom: 20%; right: 20%; }

        /* 3D positioning */
        .dice-face:nth-child(1) { transform: rotateY(0deg) translateZ(40px); }
        .dice-face:nth-child(2) { transform: rotateY(90deg) translateZ(40px); }
        .dice-face:nth-child(3) { transform: rotateY(180deg) translateZ(40px); }
        .dice-face:nth-child(4) { transform: rotateY(-90deg) translateZ(40px); }
        .dice-face:nth-child(5) { transform: rotateX(90deg) translateZ(40px); }
        .dice-face:nth-child(6) { transform: rotateX(-90deg) translateZ(40px); }

        .dice.rolling {
            animation: diceRoll 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            filter: drop-shadow(0 20px 40px rgba(255,215,0,0.6)) brightness(1.2);
        }

        @keyframes diceRoll {
            0% { 
                transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1);
            }
            20% { 
                transform: rotateX(180deg) rotateY(180deg) rotateZ(90deg) scale(1.2);
            }
            40% { 
                transform: rotateX(360deg) rotateY(360deg) rotateZ(180deg) scale(1.1);
            }
            60% { 
                transform: rotateX(540deg) rotateY(540deg) rotateZ(270deg) scale(1.3);
            }
            80% { 
                transform: rotateX(720deg) rotateY(720deg) rotateZ(360deg) scale(1.1);
            }
            100% { 
                transform: rotateX(900deg) rotateY(900deg) rotateZ(450deg) scale(1);
            }
        }

        .btn {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
            min-height: 44px;
            -webkit-appearance: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.3);
        }

        .btn-music {
            background: linear-gradient(135deg, #28a745, #20c997);
            margin-bottom: 10px;
        }

        .btn-music:hover {
            box-shadow: 0 5px 15px rgba(40,167,69,0.3);
        }

        .player-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .player-active {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .question-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .question-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .question-options {
            margin: 20px 0;
        }

        .option-btn {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 18px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 44px;
            font-size: 16px;
            -webkit-appearance: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .option-btn:hover {
            background: #e9ecef;
            border-color: #007bff;
        }

        .option-correct {
            background: #d4edda !important;
            border-color: #28a745 !important;
        }

        .option-incorrect {
            background: #f8d7da !important;
            border-color: #dc3545 !important;
        }

        /* Efeitos de moedas e bomba */
        .coin-effect {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 9999;
            animation: coinFly 2s ease-out forwards;
        }

        @keyframes coinFly {
            0% {
                transform: translateY(0) scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translateY(-100px) scale(1.5) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }

        .bomb-effect {
            position: fixed;
            font-size: 48px;
            pointer-events: none;
            z-index: 9999;
            animation: bombExplode 1.5s ease-out forwards;
        }

        @keyframes bombExplode {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            30% {
                transform: scale(1.5) rotate(90deg);
                opacity: 1;
            }
            60% {
                transform: scale(2) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }

        .screen-shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .board {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
                max-width: 100%;
            }
            
            .casa {
                font-size: 0.8rem;
                padding: 6px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .dice {
                width: 80px;
                height: 80px;
                margin: 0 10px;
            }
            
            .dice-face {
                width: 80px;
                height: 80px;
            }
            
            .question-content {
                padding: 20px;
                margin: 10px;
            }
            
            .btn {
                font-size: 16px;
                padding: 14px 20px;
            }
        }
        
        @media (max-width: 480px) {
            .board {
                grid-template-columns: repeat(3, 1fr);
                gap: 4px;
            }
            
            .casa {
                font-size: 0.7rem;
                padding: 4px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .dice {
                width: 70px;
                height: 70px;
            }
            
            .dice-face {
                width: 70px;
                height: 70px;
            }
        }
    </style>
</head>
<body>

    <!-- Elementos Flutuantes -->
    <div class="floating-elements">
        <div class="floating-item">üçÜ</div>
        <div class="floating-item">üåº</div>
        <div class="floating-item">üçÜ</div>
        <div class="floating-item">üåº</div>
        <div class="floating-item">üçÜ</div>
        <div class="floating-item">üåº</div>
        <div class="floating-item">üçÜ</div>
        <div class="floating-item">üåº</div>
        <div class="floating-item">üçÜ</div>
        <div class="floating-item">üåº</div>
    </div>
    
    <div class="container">
        <div class="game-board">
            <div class="header">
                <div class="floating-coins">
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                    <div class="coin">ü™ô</div>
                </div>
                <h1>üéØ Level Up: Guia de Sa√∫de Sexual</h1>
                <p>Bem-vindo ao Level Up: Guia de Sa√∫de Sexual! O jogo de tabuleiro din√¢mico e educativo onde voc√™ se junta a Mario e Peach em uma miss√£o crucial para aumentar seus conhecimentos sobre sa√∫de sexual, preven√ß√£o e consentimento.</p>
                <p>Jogue em turnos, lance o dado e avance pelo mapa, enfrentando desafios e conquistando recompensas. Seu objetivo √© chegar ao fim do tabuleiro com o m√°ximo de conhecimento e moedas!</p>
            </div>
            
            <div class="board" id="board">
                <!-- Casas ser√£o geradas pelo JavaScript -->
            </div>
            
            <div class="dice-container">
                <div class="dice" id="dice1" onclick="lancarDado()">
                    <div class="dice-face face-1">
                        <div class="dice-dot"></div>
                    </div>
                    <div class="dice-face face-2">
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                    </div>
                    <div class="dice-face face-3">
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                    </div>
                    <div class="dice-face face-4">
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                    </div>
                    <div class="dice-face face-5">
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                    </div>
                    <div class="dice-face face-6">
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                        <div class="dice-dot"></div>
                    </div>
                </div>
                <button class="btn" onclick="lancarDado()">üé≤ Rolar Dado</button>
                <button class="btn btn-music" id="musicToggle" onclick="toggleMusic()">üé∂ Ligar M√∫sica</button>
            </div>
        </div>
        
        <div class="control-panel">
            <div id="introducao">
                <h3>üéÆ Como Jogar</h3>
                <p>‚Ä¢ Role os dados para mover pelo tabuleiro</p>
                <p>‚Ä¢ üü° Casas amarelas: Perguntas (+10 moedas se acertar)</p>
                <p>‚Ä¢ üü¢ Casas verdes: B√¥nus (+5 moedas)</p>
                <p>‚Ä¢ ‚ö´ Casas do Bowser: Cuidado! (-5 moedas)</p>
                <p>‚Ä¢ Chegue ao final para vencer!</p>
            </div>
            
            <div class="stats">
                <h3>üìä Placar</h3>
                <div id="players">
                    <div class="player-info player-active">
                        <span>üë¶ Mario</span>
                        <div>
                            <div>Casa: 1</div>
                            <div>ü™ô Moedas: 0</div>
                        </div>
                    </div>
                    <div class="player-info">
                        <span>üë∏ Peach</span>
                        <div>
                            <div>Casa: 1</div>
                            <div>ü™ô Moedas: 0</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="messages">
                <h3>üí¨ Mensagens</h3>
                <div id="gameMessages">
                    <p>üéØ Vez do Mario! Role os dados para come√ßar.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Pergunta -->
    <div class="question-modal" id="questionModal">
        <div class="question-content">
            <h3 id="questionTitle">Pergunta</h3>
            <p id="questionText"></p>
            <div class="question-options" id="questionOptions"></div>
            <div id="questionExplanation" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;"></div>
            <button class="btn" id="continueBtn" onclick="fecharPergunta()" style="display: none;">Continuar</button>
        </div>
    </div>

    <script>
        let currentPlayer = 0;
        let players = [
            { name: 'Mario', position: 0, emoji: 'üë¶', coins: 0 },
            { name: 'Peach', position: 0, emoji: 'üë∏', coins: 0 }
        ];

        // Vari√°veis de √°udio
        let isMusicPlaying = false;
        let audioHabilitado = false;
        let bgMusic = null;
        let musicToggleBtn = null;

        // Fun√ß√£o para habilitar √°udio
        function habilitarAudio() {
            if (!audioHabilitado) {
                // Criar elemento de √°udio se n√£o existir
                if (!bgMusic) {
                    bgMusic = new Audio();
                    bgMusic.loop = true;
                    bgMusic.volume = 0.3;
                    bgMusic.preload = 'auto';
                    // Usando uma m√∫sica de dom√≠nio p√∫blico
                    bgMusic.src = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT';
                    
                    // iOS espec√≠fico - tentar carregar o √°udio
                    bgMusic.load();
                }
                audioHabilitado = true;
            }
        }

        // Fun√ß√£o para ligar/desligar a m√∫sica
        function toggleMusic() {
            habilitarAudio(); 

            if (isMusicPlaying) {
                bgMusic.pause();
                musicToggleBtn.textContent = 'üé∂ Ligar M√∫sica';
                isMusicPlaying = false;
            } else {
                bgMusic.play().then(() => {
                    musicToggleBtn.textContent = 'üîá Desligar M√∫sica';
                    isMusicPlaying = true;
                    audioHabilitado = true;
                }).catch(error => {
                    console.warn("A reprodu√ß√£o de BGM foi bloqueada. Tente Lan√ßar Dado.");
                    musicToggleBtn.textContent = '‚ùå M√∫sica Bloqueada (Tente Lan√ßar Dado)';
                });
            }
        }

        // Banco de Perguntas (Mantido)
        const bancoDePerguntas = [
            // === PERGUNTAS DE M√öLTIPLA ESCOLHA (QUIZ - CASAS NORMAIS) ===
            // --- Tema: Preservativo Masculino ---
            {
                tema: "Preservativo Masculino",
                tipo: "quiz",
                pergunta: "Qual √© o erro mais comum ao usar o preservativo masculino que pode faz√™-lo estourar?",
                opcoes: [
                    "Usar lubrificante √† base de silicone.",
                    "N√£o retirar o ar da ponta (reservat√≥rio) antes de desenrolar.",
                    "Guard√°-lo no bolso por muito tempo.",
                    "Desenrolar o preservativo antes do p√™nis estar totalmente ereto."
                ],
                respostaCorreta: 1, 
                explicacao: "O erro mais comum √© **n√£o retirar o ar da ponta** (reservat√≥rio) antes de o desenrolar no p√™nis. O ar preso pode criar uma bolha que, com a press√£o, faz o preservativo estourar."
            },
            {
                tema: "Preservativo Masculino",
                tipo: "quiz",
                pergunta: "Onde o preservativo deve ser guardado para evitar que se torne inseguro?",
                opcoes: [
                    "Na carteira (pelo calor e fric√ß√£o).",
                    "No porta-luvas do carro (pelo calor extremo).",
                    "Num local fresco, seco e protegido (como um bolso da mochila).",
                    "Em contato direto com a luz solar."
                ],
                respostaCorreta: 2, 
                explicacao: "O calor e a fric√ß√£o (esfregar na carteira/porta-luvas) podem danificar o l√°tex. Voc√™ deve guard√°-lo num **local fresco, seco e protegido** (como um bolso da mochila) e verificar sempre o prazo de validade."
            },
            {
                tema: "Preservativo Masculino",
                tipo: "quiz",
                pergunta: "A UPA tem preservativo masculino gratuito?",
                opcoes: [
                    "N√£o, apenas nas UBS (Unidades B√°sicas de Sa√∫de).",
                    "Sim, mas tem que preencher um formul√°rio.",
                    "Sim. Toda UPA deve ter dispon√≠vel, em lugar vis√≠vel e de acesso livre.",
                    "Apenas em campanhas espec√≠ficas."
                ],
                respostaCorreta: 2, 
                explicacao: "**Sim.** Toda UPA deve ter dispon√≠vel, em lugar vis√≠vel e de acesso livre, o preservativo. Voc√™ n√£o precisa pedir para nenhum funcion√°rio, √© s√≥ pegar."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "Para que serve o anel externo do preservativo feminino?",
                opcoes: [
                    "√â um reservat√≥rio para o esperma.",
                    "Serve para manter o preservativo fora da vagina, cobrindo a vulva.",
                    "√â usado apenas para retirar o preservativo no final.",
                    "Ajuda a manter a p√≠lula do dia seguinte no lugar."
                ],
                respostaCorreta: 1, 
                explicacao: "O **anel externo** serve para manter o preservativo feminino **fora da vagina**, cobrindo a vulva (√°rea externa). √â tamb√©m usado para guiar a inser√ß√£o e a remo√ß√£o ap√≥s a rela√ß√£o sexual."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "Qual √© uma das principais vantagens do preservativo feminino?",
                opcoes: [
                    "N√£o precisa de lubrificante extra.",
                    "Pode ser inserido horas antes da rela√ß√£o sexual.",
                    "√â o m√©todo mais eficaz contra o HPV.",
                    "Pode ser usado simultaneamente com a camisinha masculina."
                ],
                respostaCorreta: 1, 
                explicacao: "Uma das grandes vantagens √© que o preservativo feminino pode ser colocado **horas antes da rela√ß√£o sexual**, o que tira a press√£o do momento e garante que a preven√ß√£o j√° est√° pronta."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "O anel menor do preservativo feminino deve ser colocado:",
                opcoes: [
                    "No meio da vagina, dobrado como um leque.",
                    "O mais fundo que o usu√°rio conseguir, para prender a camisinha l√° dentro.",
                    "Apenas na entrada da vagina, como o anel externo.",
                    "Ele √© descartado antes do uso."
                ],
                respostaCorreta: 1, 
                explicacao: "O **anel menor** √© quem prende a camisinha l√° dentro. Voc√™ deve apert√°-lo com os dedos e **empurr√°-lo o mais fundo que conseguir**. √â normal que o preservativo fique frouxo ou meio torcido dentro da vagina."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "Qual a regra de ouro para o uso do preservativo feminino e masculino juntos?",
                opcoes: [
                    "√â altamente recomend√°vel para dupla prote√ß√£o.",
                    "NUNCA devem ser usados ao mesmo tempo, devido ao atrito.",
                    "S√≥ devem ser usados juntos com lubrificante √† base de √≥leo.",
                    "√â permitido apenas se ambos forem de materiais diferentes (l√°tex e nitrilo)."
                ],
                respostaCorreta: 1, 
                explicacao: "O casal **NUNCA deve usar dois tipos de preservativos ao mesmo tempo**! O atrito entre os dois materiais pode rasgar as duas camisinhas. Escolha um ou outro m√©todo."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "Como garantir que o p√™nis vai entrar dentro do preservativo feminino e n√£o ao lado?",
                opcoes: [
                    "O p√™nis deve ser inserido antes do anel externo ser colocado.",
                    "O anel externo (o maior) atua como um 'guia' para o p√™nis, cobrindo a entrada.",
                    "Usar lubrificante √† base de √≥leo, pois √© mais escorregadio.",
                    "Deve-se prender o anel externo com fita adesiva m√©dica na vulva."
                ],
                respostaCorreta: 1, 
                explicacao: "O **anel externo (o anel maior) √© a sua garantia**. Ele fica para fora, cobrindo a entrada da vagina. Ele funciona como um 'guia' para o p√™nis. Voc√™ pode segurar o anel externo no in√≠cio da penetra√ß√£o, caso sinta-se insegura."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "Qual o procedimento correto para retirar o preservativo feminino ap√≥s a rela√ß√£o sem fazer bagun√ßa?",
                opcoes: [
                    "Puxar rapidamente o anel externo para fora.",
                    "Torcer o anel externo para 'fechar' a bolsa e puxar com cuidado.",
                    "Deixar o preservativo l√° dentro at√© o anel interno cair sozinho.",
                    "Fazer ducha vaginal para limpar o s√™men antes de retirar."
                ],
                respostaCorreta: 1, 
                explicacao: "Voc√™ deve **torcer o anel externo** que est√° para fora. Isso 'fecha' a bolsa e prende o s√™men l√° dentro. Depois, √© s√≥ puxar com cuidado. Lembrete: Sempre jogue no lixo."
            },
            {
                tema: "Preservativo Feminino",
                tipo: "quiz",
                pergunta: "A UPA tem preservativo feminino gratuito?",
                opcoes: [
                    "N√£o, apenas masculinos.",
                    "Sim, mas precisa pedir ao m√©dico ou enfermeiro.",
                    "Sim. Toda UPA deve ter dispon√≠vel, em lugar vis√≠vel e de acesso livre.",
                    "Apenas se voc√™ for menor de idade."
                ],
                respostaCorreta: 2, 
                explicacao: "**Sim.** Toda UPA deve ter dispon√≠vel, em lugar vis√≠vel e de acesso livre, o preservativo. Voc√™ n√£o precisa pedir para nenhum funcion√°rio, √© s√≥ pegar."
            },
            // --- Tema: Consentimento, Orienta√ß√£o Sexual, IST ---
            {
                tema: "Consentimento",
                tipo: "quiz",
                pergunta: "O que significa 'Consentimento Cont√≠nuo'?",
                opcoes: [
                    "O consentimento √© dado no in√≠cio e vale at√© o fim da rela√ß√£o.",
                    "O consentimento deve ser confirmado em cada etapa e pode ser retirado a qualquer momento.",
                    "S√≥ √© necess√°rio dar consentimento uma vez por parceiro.",
                    "√â o consentimento dado por meio de um contrato assinado."
                ],
                respostaCorreta: 1, 
                explicacao: "**Consentimento Cont√≠nuo** significa que ele deve ser dado e confirmado em cada etapa da atividade sexual, podendo ser retirado a qualquer momento. √â crucial porque o consentimento anterior n√£o garante o atual."
            },
            {
                tema: "Orienta√ß√£o Sexual",
                tipo: "quiz",
                pergunta: "Qual √© a diferen√ßa entre Orienta√ß√£o Sexual e Identidade de G√™nero?",
                opcoes: [
                    "Orienta√ß√£o √© a atra√ß√£o; Identidade √© como a pessoa se identifica.",
                    "Orienta√ß√£o √© bin√°ria; Identidade √© fluida.",
                    "N√£o h√° diferen√ßa, os termos s√£o sin√¥nimos.",
                    "Orienta√ß√£o √© apenas sobre atra√ß√£o rom√¢ntica; Identidade √© atra√ß√£o sexual."
                ],
                respostaCorreta: 0, 
                explicacao: "**Orienta√ß√£o Sexual** √© a atra√ß√£o emocional, rom√¢ntica e/ou sexual por outras pessoas. **Identidade de G√™nero** √© como voc√™ se identifica (homem, mulher, n√£o-bin√°rio, etc.)."
            },
            {
                tema: "IST",
                tipo: "quiz",
                pergunta: "Por que uma pessoa sem sintomas vis√≠veis pode ter uma IST?",
                opcoes: [
                    "Porque os sintomas s√≥ aparecem em idosos.",
                    "Porque o corpo est√° a combater a IST eficientemente.",
                    "Porque muita IST (como Clam√≠dia e HPV) pode ser assintom√°tica por longos per√≠odos.",
                    "Porque a IST s√≥ se manifesta em rela√ß√µes anais."
                ],
                respostaCorreta: 2, 
                explicacao: "**Muitas IST podem ser assintom√°ticas** durante muito tempo (como Clam√≠dia e HPV), tornando os testes e o uso de preservativo essenciais mesmo na aus√™ncia de sintomas."
            },
            // --- Tema: Preservativo - Uso Correto (B√¥nus) ---
            { 
                tema: "Preservativo - Uso Correto",
                tipo: "quiz",
                pergunta: "Qual √© a 'Regra de Ouro' se voc√™ come√ßar a desenrolar a camisinha do lado errado e tocar o p√™nis?",
                opcoes: [
                    "Vire-a rapidamente e continue a usar.",
                    "Jogue fora e pegue outra camisinha.",
                    "Lave-a com √°gua e sab√£o e use-a.",
                    "Coloque um pouco de lubrificante na parte interna para limpar."
                ],
                respostaCorreta: 1, 
                explicacao: "**Regra de Ouro:** Se come√ßou a desenrolar do lado errado e tocou no p√™nis, **jogue fora e pegue outra**! Fluidos pr√©-ejaculat√≥rios podem ter entrado em contato com a parte de dentro."
            },
            {
                tema: "Preservativo - Uso Correto",
                tipo: "quiz",
                pergunta: "Por que √© crucial apertar a pontinha (o 'bico') antes de desenrolar?",
                opcoes: [
                    "Para fazer um barulho de estalo e avisar o parceiro.",
                    "Para que o preservativo fique mais justo na base.",
                    "Para tirar o ar, evitando que o preservativo estoure com a press√£o da ejacula√ß√£o.",
                    "Para que o l√°tex n√£o grude."
                ],
                respostaCorreta: 2, 
                explicacao: "Aquela pontinha √© o reservat√≥rio do esperma. Se n√£o apertar para **tirar o ar**, o ar fica preso. Na hora da ejacula√ß√£o, a press√£o pode ser tanta que o preservativo **estoura**."
            },
            {
                tema: "Preservativo - Uso Correto",
                tipo: "quiz",
                pergunta: "At√© onde a camisinha masculina deve ser desenrolada?",
                opcoes: [
                    "Apenas at√© a metade do p√™nis, para economizar material.",
                    "At√© o final, cobrindo o p√™nis por inteiro, da cabe√ßa at√© a base.",
                    "Apenas at√© a ponta (glande), deixando o resto solto.",
                    "N√£o importa, contanto que cubra a uretra."
                ],
                respostaCorreta: 1, 
                explicacao: "**Sim, totalmente!** A camisinha s√≥ protege se cobrir o p√™nis por inteiro, **da cabe√ßa at√© a base**. A borda na base ajuda a prender o esperma."
            },
            {
                tema: "Preservativo - Uso Correto",
                tipo: "quiz",
                pergunta: "Na hora de tirar o preservativo ap√≥s a ejacula√ß√£o, qual o passo crucial para evitar vazamento?",
                opcoes: [
                    "Retirar o p√™nis quando j√° estiver totalmente mole.",
                    "Segurar a borda da camisinha na base do p√™nis antes de retirar.",
                    "Puxar o p√™nis rapidamente para fora.",
                    "N√£o fazer nada, o preservativo sela automaticamente."
                ],
                respostaCorreta: 1, 
                explicacao: "Voc√™ precisa ser r√°pido e cuidadoso, **segurando a borda da camisinha na base do p√™nis** imediatamente ap√≥s a ejacula√ß√£o (antes que ele fique mole) e retirar devagar."
            },
            // --- Tema: Curiosidade ---
            {
                tema: "Curiosidade",
                tipo: "quiz",
                pergunta: "Qual a diferen√ßa chave entre libido e desejo sexual?",
                opcoes: [
                    "Libido √© a atra√ß√£o por algu√©m; Desejo √© o impulso biol√≥gico.",
                    "Libido √© o impulso/energia sexual; Desejo √© a vontade espec√≠fica de ter atividade sexual.",
                    "Libido √© apenas para homens; Desejo √© para mulheres.",
                    "Libido s√≥ existe em pessoas com m√∫ltiplos parceiros."
                ],
                respostaCorreta: 1, 
                explicacao: "**Libido** √© o termo geral para o impulso sexual ou energia sexual de uma pessoa. O **desejo sexual**, por outro lado, √© a vontade espec√≠fica de ter atividade sexual. A libido √© mais como o 'motor', enquanto o desejo √© a 'vontade de dirigir'."
            },
            {
                tema: "Curiosidade",
                tipo: "quiz",
                pergunta: "O que √© 'sexting'?",
                opcoes: [
                    "Troca de mensagens de texto sobre consentimento.",
                    "Envio de mensagens, fotos ou v√≠deos de natureza sexual expl√≠cita.",
                    "O uso de aplicativos de namoro para encontrar sexo casual.",
                    "Conversar sobre sexualidade com um psic√≥logo."
                ],
                respostaCorreta: 1, 
                explicacao: "**Sexting** √© o ato de enviar mensagens, fotos ou v√≠deos de natureza sexual expl√≠cita. Os riscos incluem a exposi√ß√£o e a distribui√ß√£o n√£o consensual do conte√∫do (pornografia de vingan√ßa), que √© ilegal e pode ter graves consequ√™ncias emocionais e legais."
            },
            {
                tema: "Curiosidade",
                tipo: "quiz",
                pergunta: "O que o conceito de 'Zona de Conforto' significa na sexualidade?",
                opcoes: [
                    "As pr√°ticas que s√£o consideradas 'normais' pela sociedade.",
                    "As pr√°ticas, fantasias e n√≠veis de intimidade com os quais uma pessoa se sente segura e √† vontade.",
                    "Apenas as pr√°ticas sexuais que resultam em orgasmo.",
                    "Pr√°ticas que n√£o exigem o uso de preservativo."
                ],
                respostaCorreta: 1, 
                explicacao: "Na sexualidade, a **'Zona de Conforto'** refere-se √†s pr√°ticas, fantasias e n√≠veis de intimidade com os quais uma pessoa se sente **segura, √† vontade e excitada**. Explorar fora dessa zona requer comunica√ß√£o e consentimento m√∫tuo."
            },
            // --- Tema: M√©todos de Barreira, Contracep√ß√£o de Emerg√™ncia, IST e Preservativo ---
            {
                tema: "M√©todos de Barreira",
                tipo: "quiz",
                pergunta: "Qual outro m√©todo contraceptivo funciona como 'barreira', al√©m das camisinhas masculina e feminina?",
                opcoes: [
                    "P√≠lula Anticoncepcional.",
                    "DIU de Cobre.",
                    "Implante Subd√©rmico.",
                    "Diafragma (usado com espermicida)."
                ],
                respostaCorreta: 3, 
                explicacao: "O **diafragma (que precisa ser usado com espermicida)** √© um exemplo de m√©todo de barreira, que impede fisicamente a entrada do esperma no √∫tero."
            },
            {
                tema: "Contracep√ß√£o de Emerg√™ncia",
                tipo: "quiz",
                pergunta: "Qual o principal motivo para a 'p√≠lula do dia seguinte' n√£o ser usada como m√©todo contraceptivo regular?",
                opcoes: [
                    "A dose hormonal √© muito elevada.",
                    "√â muito cara para uso frequente.",
                    "√â ineficaz se usada mais de uma vez ao ano.",
                    "√â dif√≠cil de encontrar em farm√°cias."
                ],
                respostaCorreta: 0, 
                explicacao: "A p√≠lula do dia seguinte **n√£o deve ser usada como m√©todo regular** porque possui uma **dose hormonal muito elevada**, sendo reservada apenas para emerg√™ncias."
            },
            {
                tema: "IST e Preservativo",
                tipo: "quiz",
                pergunta: "Qual IST o preservativo pode n√£o proteger totalmente?",
                opcoes: [
                    "Clam√≠dia e Gonorreia.",
                    "S√≠filis e HIV.",
                    "HPV e Herpes Genital.",
                    "A camisinha protege 100% contra todas as IST."
                ],
                respostaCorreta: 2, 
                explicacao: "**IST como o HPV e o Herpes Genital** podem ser transmitidas pelo contato com √°reas da pele infectadas que **n√£o est√£o cobertas** pelo preservativo."
            },
            {
                tema: "Mitos e Verdades",
                tipo: "quiz",
                pergunta: "Qual o risco principal da ducha vaginal ap√≥s a rela√ß√£o sexual?",
                opcoes: [
                    "√â totalmente segura e recomendada para higiene.",
                    "Pode causar infertilidade imediatamente.",
                    "Desequilibra a flora vaginal, aumentando o risco de infec√ß√µes.",
                    "Aumenta a chance de gravidez."
                ],
                respostaCorreta: 2, 
                explicacao: "A ducha desequilibra a flora vaginal, **aumentando o risco de infec√ß√µes**. O corpo feminino tem um sistema natural de limpeza que deve ser respeitado."
            },
            {
                tema: "Contracep√ß√£o",
                tipo: "quiz",
                pergunta: "Qual √© o √∫nico m√©todo contraceptivo que oferece prote√ß√£o contra a maioria das IST?",
                opcoes: [
                    "A p√≠lula anticoncepcional di√°ria.",
                    "O dispositivo intrauterino (DIU).",
                    "O anel vaginal.",
                    "O preservativo (feminino e masculino)."
                ],
                respostaCorreta: 3, 
                explicacao: "O **preservativo (feminino e masculino)** √© o √∫nico m√©todo que oferece dupla prote√ß√£o: contra a gravidez e contra a maioria das IST."
            },
            // === PERGUNTAS DE VERDADEIRO OU FALSO ===
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "A p√≠lula do dia seguinte pode ser usada como m√©todo contraceptivo regular.",
                respostaCorreta: false,
                explicacao: "**FALSO!** A p√≠lula do dia seguinte √© apenas para emerg√™ncias e com orienta√ß√£o m√©dica. Usar regularmente pode causar desequil√≠brios hormonais."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "√â poss√≠vel engravidar mesmo usando preservativo corretamente.",
                respostaCorreta: true,
                explicacao: "**VERDADEIRO!** Nenhum m√©todo contraceptivo √© 100% eficaz. O preservativo tem cerca de 98% de efic√°cia quando usado corretamente, mas ainda existe uma pequena possibilidade de falha."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "Toda IST apresenta sintomas vis√≠veis.",
                respostaCorreta: false,
                explicacao: "**FALSO!** Muita IST (como Clam√≠dia, HPV e HIV) pode ser assintom√°tica por longos per√≠odos. Por isso √© importante fazer testes regulares e usar sempre preservativo."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "O preservativo protege contra toda IST.",
                respostaCorreta: false,
                explicacao: "**FALSO!** O preservativo protege contra a maioria das IST, mas algumas como HPV e Herpes podem ser transmitidas pelo contato com √°reas da pele n√£o cobertas pelo preservativo."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "Lubrificantes √† base de √≥leo s√£o seguros para usar com preservativos de l√°tex.",
                respostaCorreta: false,
                explicacao: "**FALSO!** Lubrificantes √† base de √≥leo (como vaselina ou √≥leos de massagem) podem danificar o l√°tex do preservativo, tornando-o menos eficaz e mais propenso a rasgar. Use sempre lubrificantes √† base de √°gua ou silicone com preservativos de l√°tex."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "IST √© um problema de sa√∫de apenas para pessoas sexualmente ativas com m√∫ltiplos parceiros.",
                respostaCorreta: false,
                explicacao: "**FALSO!** Qualquer pessoa sexualmente ativa pode contrair uma IST, independentemente do n√∫mero de parceiros. O risco est√° na pr√°tica sexual desprotegida."
            },
            {
                tema: "Verdadeiro ou Falso",
                tipo: "verdadeiroFalso",
                pergunta: "O sexo anal √© uma pr√°tica de baixo risco para a transmiss√£o de IST em compara√ß√£o com o sexo vaginal.",
                respostaCorreta: false,
                explicacao: "**FALSO!** O sexo anal √©, na verdade, uma pr√°tica de alto risco para a transmiss√£o de IST (incluindo o HIV) devido √† maior fragilidade do tecido anal. O uso correto do preservativo e lubrificante √© essencial."
            }
        ];

        const totalCasas = 25;
        let posicoes = { 1: 1, 2: 1 };

        // Inicializar o tabuleiro (mantido)
        function criarTabuleiro() {
            const tabuleiro = document.getElementById('board');
            tabuleiro.innerHTML = '';
            
            for (let i = 1; i <= totalCasas; i++) {
                const casa = document.createElement('div');
                casa.className = 'casa';
                casa.id = `casa-${i}`;
                
                if (i === 1) {
                    casa.classList.add('casa-inicio');
                    casa.innerHTML = '<div>üèÅ</div><div>IN√çCIO</div>';
                } else if (i === totalCasas) {
                    casa.classList.add('casa-fim');
                    casa.innerHTML = '<div>üèÜ</div><div>FIM</div>';
                } 
                else if (i === 13) { 
                    casa.classList.add('casa-bowser');
                    casa.innerHTML = `<div>üê¢</div><div>BOWSER</div>`;
                } 
                else if ([3, 7, 11, 15, 18, 20, 22].includes(i)) {
                    casa.classList.add('casa-pergunta');
                    casa.innerHTML = `<div>üí£</div><div>V/F</div>`;
                    casa.style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
                    casa.style.borderColor = '#dc3545';
                } else if (i === 23) {
                    casa.classList.add('casa-especial');
                    casa.innerHTML = '<div>üî•</div><div>+2</div>';
                } else {
                    casa.classList.add('casa-normal');
                    casa.textContent = i;
                }
                
                tabuleiro.appendChild(casa);
            }
            
            moverPeca(1, posicoes[1], posicoes[1]);
            moverPeca(2, posicoes[2], posicoes[2]);

            atualizarStats();
            atualizarTurnoDisplay();
        }

        // Mover pe√ßa (mantido)
        function moverPeca(jogadorId, posicaoAntiga, novaPosicao) {
            const pecaId = `peca-${jogadorId}`;
            
            if (posicaoAntiga > 0) {
                const casaAntiga = document.getElementById(`casa-${posicaoAntiga}`);
                const pecaAntiga = casaAntiga.querySelector(`.${pecaId}`);
                if (pecaAntiga) {
                    pecaAntiga.remove();
                }
            }

            if (novaPosicao > 0 && novaPosicao <= totalCasas) {
                const casaNova = document.getElementById(`casa-${novaPosicao}`);
                let peca = casaNova.querySelector(`.${pecaId}`);

                if (!peca) {
                    peca = document.createElement('div');
                    peca.className = `peca ${pecaId}`;
                    peca.textContent = players[jogadorId - 1].emoji;
                }

                peca.classList.toggle('active', jogadorId === (currentPlayer + 1));
                
                casaNova.appendChild(peca);

                const peca1 = casaNova.querySelector('.peca-1');
                const peca2 = casaNova.querySelector('.peca-2');

                if (peca1 && peca2 && posicaoAntiga !== novaPosicao) {
                    peca1.style.left = '-10px';
                    peca2.style.left = 'auto';
                    peca2.style.right = '-10px';
                } else if (peca1) {
                    peca1.style.left = 'auto';
                    peca1.style.right = '-10px';
                } else if (peca2) {
                    peca2.style.left = '-10px';
                    peca2.style.right = 'auto';
                }
            }
        }

        // Fun√ß√£o para alternar o jogador (mantido)
        function trocarTurno() {
            currentPlayer = (currentPlayer === 0) ? 1 : 0;
            
            document.querySelectorAll('.peca').forEach(p => p.classList.remove('active'));
            const pecaAtiva = document.querySelector(`.peca-${currentPlayer + 1}`);
            if (pecaAtiva) {
                 pecaAtiva.classList.add('active');
            }

            atualizarTurnoDisplay();
        }

        function atualizarStats() {
            const playersDiv = document.getElementById('players');
            playersDiv.innerHTML = '';
            
            players.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = `player-info ${index === currentPlayer ? 'player-active' : ''}`;
                div.innerHTML = `
                    <span>${player.emoji} ${player.name}</span>
                    <div>
                        <div>Casa: ${posicoes[index + 1]}</div>
                        <div>ü™ô Moedas: ${player.coins}</div>
                    </div>
                `;
                playersDiv.appendChild(div);
            });
        }

        function atualizarTurnoDisplay() {
            adicionarMensagem(`üéØ Vez do ${players[currentPlayer].name}!`);
        }

        function mostrarPergunta(pergunta) {
            const modal = document.getElementById('questionModal');
            const title = document.getElementById('questionTitle');
            const text = document.getElementById('questionText');
            const options = document.getElementById('questionOptions');
            const explanation = document.getElementById('questionExplanation');
            const continueBtn = document.getElementById('continueBtn');

            title.textContent = pergunta.tema;
            text.textContent = pergunta.pergunta;
            options.innerHTML = '';
            explanation.style.display = 'none';
            continueBtn.style.display = 'none';

            if (pergunta.tipo === 'verdadeiroFalso') {
                // Pergunta Verdadeiro ou Falso
                const btnVerdadeiro = document.createElement('button');
                btnVerdadeiro.className = 'option-btn';
                btnVerdadeiro.textContent = '‚úÖ VERDADEIRO';
                btnVerdadeiro.onclick = () => responderPergunta(true, pergunta.respostaCorreta, pergunta.explicacao);
                options.appendChild(btnVerdadeiro);

                const btnFalso = document.createElement('button');
                btnFalso.className = 'option-btn';
                btnFalso.textContent = '‚ùå FALSO';
                btnFalso.onclick = () => responderPergunta(false, pergunta.respostaCorreta, pergunta.explicacao);
                options.appendChild(btnFalso);
            } else if (pergunta.tipo === 'quiz') {
                // Pergunta de m√∫ltipla escolha
                pergunta.opcoes.forEach((opcao, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn quiz-option-btn';
                    btn.textContent = `${String.fromCharCode(65 + index)}. ${opcao}`;
                    btn.style.textAlign = 'left';
                    btn.style.background = '#e9ecef';
                    btn.style.color = '#333';
                    btn.style.marginBottom = '10px';
                    btn.onclick = () => responderQuiz(index, pergunta.respostaCorreta, pergunta.explicacao);
                    options.appendChild(btn);
                });
                window.perguntaAtual = pergunta;
            }

            modal.style.display = 'flex';
        }

        function responderPergunta(resposta, correta, explicacao) {
            const options = document.querySelectorAll('.option-btn');
            const explanation = document.getElementById('questionExplanation');
            const continueBtn = document.getElementById('continueBtn');

            options.forEach((btn, index) => {
                btn.onclick = null;
                
                // Para perguntas verdadeiro/falso
                if (typeof correta === 'boolean') {
                    if ((index === 0 && correta === true) || (index === 1 && correta === false)) {
                        btn.classList.add('option-correct');
                    } else if ((index === 0 && resposta === true && resposta !== correta) || 
                              (index === 1 && resposta === false && resposta !== correta)) {
                        btn.classList.add('option-incorrect');
                    }
                } else {
                    // Para perguntas de m√∫ltipla escolha
                    if (index === correta) {
                        btn.classList.add('option-correct');
                    } else if (index === resposta && resposta !== correta) {
                        btn.classList.add('option-incorrect');
                    }
                }
            });

            explanation.innerHTML = explicacao;
            explanation.style.display = 'block';
            continueBtn.style.display = 'block';

            if (resposta === correta) {
                players[currentPlayer].coins += 10;
                criarEfeitoMoedas();
                adicionarMensagem(`‚úÖ ${players[currentPlayer].name} acertou a pergunta e ganhou 10 moedas! ü™ô`);
                atualizarStats();
            } else {
                criarEfeitoBomba();
                adicionarMensagem(`‚ùå ${players[currentPlayer].name} errou a pergunta.`);
            }
        }

        function responderQuiz(indiceResposta, respostaCorreta, explicacao) {
            const options = document.querySelectorAll('.quiz-option-btn');
            const explanation = document.getElementById('questionExplanation');
            const continueBtn = document.getElementById('continueBtn');

            options.forEach((btn, index) => {
                btn.onclick = null;
                btn.disabled = true;
                
                if (index === respostaCorreta) {
                    btn.style.background = '#28a745';
                    btn.style.color = 'white';
                } else if (index === indiceResposta && indiceResposta !== respostaCorreta) {
                    btn.style.background = '#dc3545';
                    btn.style.color = 'white';
                }
            });

            if (indiceResposta === respostaCorreta) {
                players[currentPlayer].coins += 5;
                criarEfeitoMoedas();
                adicionarMensagem(`‚úÖ ${players[currentPlayer].name} acertou o quiz e ganhou 5 moedas! ü™ô`);
                
                // Avan√ßa uma casa b√¥nus
                const jogadorId = currentPlayer + 1;
                const posicaoAntiga = posicoes[jogadorId];
                let novaPosicao = posicoes[jogadorId] + 1;
                
                if (novaPosicao > totalCasas) {
                    novaPosicao = totalCasas;
                }
                
                posicoes[jogadorId] = novaPosicao;
                moverPeca(jogadorId, posicaoAntiga, novaPosicao);
                atualizarStats();
                
                adicionarMensagem(`üéØ ${players[currentPlayer].name} avan√ßa 1 casa b√¥nus!`);
                
                if (posicoes[jogadorId] === totalCasas) {
                    setTimeout(() => {
                        exibirVitoria(jogadorId);
                    }, 1000);
                }
            } else {
                criarEfeitoBomba();
                adicionarMensagem(`‚ùå ${players[currentPlayer].name} errou o quiz.`);
            }

            explanation.innerHTML = explicacao;
            explanation.style.display = 'block';
            continueBtn.style.display = 'block';
        }

        function fecharPergunta() {
            document.getElementById('questionModal').style.display = 'none';
            trocarTurno();
            document.querySelector('.btn').disabled = false;
        }

        // Obter pergunta normal (mantido)
        function obterPerguntaNormal() {
            const perguntasQuiz = bancoDePerguntas.filter(p => p.tipo === 'quiz');
            const indice = Math.floor(Math.random() * perguntasQuiz.length);
            
            return perguntasQuiz[indice];
        }
        
        // Obter pergunta Verdadeiro ou Falso (mantido)
        function obterPerguntaVF() {
            const perguntasVF = bancoDePerguntas.filter(p => p.tipo === 'verdadeiroFalso');
            const indice = Math.floor(Math.random() * perguntasVF.length);
            return perguntasVF[indice];
        }

        // Lan√ßar dado (ATUALIZADO para chamar habilitarAudio())
        function lancarDado() {
            habilitarAudio(); // Tenta liberar o √°udio no clique do dado

            const botaoDado = document.querySelector('.btn');
            const dadoElement = document.getElementById('dice1');
            const introducaoDiv = document.getElementById('introducao');
            
            botaoDado.disabled = true;
            dadoElement.classList.add('rolling');
            introducaoDiv.style.display = 'none';

            setTimeout(() => {
                const resultado = Math.floor(Math.random() * 6) + 1;
                
                // Mostrar a face correta do dado
                mostrarFaceDado(dadoElement, resultado);
                dadoElement.classList.remove('rolling');
                
                moverJogador(resultado);
            }, 1000);
        }

        // Fun√ß√£o para mostrar a face correta do dado
        function mostrarFaceDado(dadoElement, numero) {
            // Remove todas as classes de rota√ß√£o anteriores
            dadoElement.style.transform = '';
            
            // Define a rota√ß√£o para mostrar a face correta
            const rotacoes = {
                1: 'rotateX(0deg) rotateY(0deg)',
                2: 'rotateX(0deg) rotateY(-90deg)',
                3: 'rotateX(0deg) rotateY(-180deg)',
                4: 'rotateX(0deg) rotateY(90deg)',
                5: 'rotateX(-90deg) rotateY(0deg)',
                6: 'rotateX(90deg) rotateY(0deg)'
            };
            
            setTimeout(() => {
                dadoElement.style.transform = rotacoes[numero];
            }, 100);
        }

        // Mover jogador (mantido)
        function moverJogador(casas) {
            const jogadorId = currentPlayer + 1;
            const posicaoAntiga = posicoes[jogadorId];
            let novaPosicao = posicoes[jogadorId] + casas;
            
            if (novaPosicao > totalCasas) {
                novaPosicao = totalCasas;
            }
            
            posicoes[jogadorId] = novaPosicao;
            
            moverPeca(jogadorId, posicaoAntiga, novaPosicao);
            atualizarStats();
            
            if (casas > 0) {
                adicionarMensagem(`üé≤ **${players[currentPlayer].name}** lan√ßou ${casas}! Moveu para a casa ${novaPosicao}.`);
            } else if (casas < 0) {
                adicionarMensagem(`üîô **${players[currentPlayer].name}** voltou ${Math.abs(casas)} casas para ${novaPosicao}.`);
            } else {
                adicionarMensagem(`‚û°Ô∏è **${players[currentPlayer].name}** avan√ßa! Posi√ß√£o: ${novaPosicao}.`);
            }
            
            if (posicoes[jogadorId] === totalCasas) {
                setTimeout(() => {
                    exibirVitoria(jogadorId);
                }, 1000);
                return;
            }
            
            setTimeout(() => {
                verificarCasaEspecial(novaPosicao);
            }, 500);
        }

        // Fun√ß√£o para verificar se a casa tem uma a√ß√£o especial (mantido)
        function verificarCasaEspecial(posicao) {
            const jogadorId = currentPlayer + 1;
            const nomeJogador = players[currentPlayer].name;

            // Casa 13 (Bowser) - Perde 10 Moedas
            if (posicao === 13) {
                let moedasPerdidas = 10;
                
                if (players[currentPlayer].coins < moedasPerdidas) {
                    moedasPerdidas = players[currentPlayer].coins; 
                    players[currentPlayer].coins = 0;
                } else {
                    players[currentPlayer].coins -= moedasPerdidas;
                }

                atualizarStats();
                adicionarMensagem(`üê¢ **CASA BOWSER!** ${nomeJogador} perdeu **${moedasPerdidas} üü° moedas**!`);

                trocarTurno();
                document.querySelector('.btn').disabled = false;
            }
            // Casas de Verdadeiro ou Falso (Perigo: Volta ao In√≠cio)
            else if ([3, 7, 11, 15, 18, 20, 22].includes(posicao)) {
                const perguntaAtual = obterPerguntaVF();
                mostrarPergunta(perguntaAtual);
                adicionarMensagem(`üí£ <strong>VERDADEIRO OU FALSO!</strong> A vez √© de ${nomeJogador}.`);
            }

            // L√≥gica para a Casa 23 (A√ß√£o: Avan√ßa 2 Casas!)
            else if (posicao === 23) {
                let avanco = 2;
                let posicaoAntiga = posicoes[jogadorId];
                let novaPosicaoAposAcao = posicoes[jogadorId] + avanco;

                if (novaPosicaoAposAcao > totalCasas) {
                    novaPosicaoAposAcao = totalCasas;
                }
                
                posicoes[jogadorId] = novaPosicaoAposAcao;
                moverPeca(jogadorId, posicaoAntiga, novaPosicaoAposAcao);
                atualizarStats();
                
                adicionarMensagem(`üî• **A√á√ÉO ESPECIAL!** ${nomeJogador} avan√ßa mais ${avanco} casas!`);

                if (posicoes[jogadorId] === totalCasas) {
                    setTimeout(() => {
                        exibirVitoria(jogadorId);
                    }, 1000);
                } else {
                    trocarTurno(); 
                    document.querySelector('.btn').disabled = false;
                }
            }
            
            // Casas normais (Quiz de M√∫ltipla Escolha)
            else if (posicao > 1 && posicao < totalCasas) {
                const casaAtual = document.getElementById(`casa-${posicao}`);
                if (casaAtual && casaAtual.classList.contains('casa-normal')) {
                    const perguntaAtual = obterPerguntaNormal();
                    if (perguntaAtual) {
                        mostrarPergunta(perguntaAtual);
                        adicionarMensagem(`üí° <strong>QUIZ B√ìNUS!</strong> Responda certo para ganhar moedas!`);
                    } else {
                        trocarTurno();
                        document.querySelector('.btn').disabled = false;
                    }
                } else {
                    trocarTurno();
                    document.querySelector('.btn').disabled = false;
                }
            } else {
                trocarTurno();
                document.querySelector('.btn').disabled = false;
            }
        }

        function exibirVitoria(jogadorId) {
            const nomeVencedor = players[jogadorId - 1].name;
            adicionarMensagem(`üèÜ **${nomeVencedor} VENCEU O JOGO!** Parab√©ns! üéâ`);
            document.querySelector('.btn').disabled = true;
        }



        function adicionarMensagem(texto) {
            const messages = document.getElementById('gameMessages');
            const p = document.createElement('p');
            p.textContent = texto;
            messages.insertBefore(p, messages.firstChild);
            
            // Manter apenas as √∫ltimas 5 mensagens
            while (messages.children.length > 5) {
                messages.removeChild(messages.lastChild);
            }
        }

        // Fun√ß√£o para criar efeito de moedas voando
        function criarEfeitoMoedas() {
            const modal = document.getElementById('questionModal');
            const modalRect = modal.getBoundingClientRect();
            const centerX = modalRect.left + modalRect.width / 2;
            const centerY = modalRect.top + modalRect.height / 2;

            // Criar m√∫ltiplas moedas
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const moeda = document.createElement('div');
                    moeda.className = 'coin-effect';
                    moeda.textContent = 'ü™ô';
                    
                    // Posi√ß√£o inicial aleat√≥ria ao redor do centro do modal
                    const offsetX = (Math.random() - 0.5) * 200;
                    const offsetY = (Math.random() - 0.5) * 100;
                    
                    moeda.style.left = (centerX + offsetX) + 'px';
                    moeda.style.top = (centerY + offsetY) + 'px';
                    
                    document.body.appendChild(moeda);
                    
                    // Remover ap√≥s a anima√ß√£o
                    setTimeout(() => {
                        if (moeda.parentNode) {
                            moeda.parentNode.removeChild(moeda);
                        }
                    }, 2000);
                }, i * 100);
            }
        }

        // Fun√ß√£o para criar efeito de bomba
        function criarEfeitoBomba() {
            const modal = document.getElementById('questionModal');
            const modalRect = modal.getBoundingClientRect();
            const centerX = modalRect.left + modalRect.width / 2;
            const centerY = modalRect.top + modalRect.height / 2;

            // Criar bomba
            const bomba = document.createElement('div');
            bomba.className = 'bomb-effect';
            bomba.textContent = 'üí•';
            bomba.style.left = centerX + 'px';
            bomba.style.top = centerY + 'px';
            
            document.body.appendChild(bomba);
            
            // Adicionar efeito de tremor na tela
            document.body.classList.add('screen-shake');
            
            // Remover efeitos ap√≥s a anima√ß√£o
            setTimeout(() => {
                if (bomba.parentNode) {
                    bomba.parentNode.removeChild(bomba);
                }
                document.body.classList.remove('screen-shake');
            }, 1500);
        }

        // Inicializar jogo
        window.onload = function() {
            musicToggleBtn = document.getElementById('musicToggle');
            criarTabuleiro();
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98e89bda9396ddeb',t:'MTc2MDQ2MDk3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
